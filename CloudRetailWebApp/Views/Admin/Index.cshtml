@{
    ViewData["Title"] = "Admin Dashboard";
}

<h2>Admin Dashboard</h2>
<p>Welcome, Administrator. You have elevated privileges.</p>

<div class="row mb-4">
    <div class="col-md-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Total Orders</h5>
                <h3 class="text-primary">@ViewBag.TotalOrders</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Pending Orders</h5>
                <h3 class="text-warning">@ViewBag.PendingOrders</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Total Users</h5>
                <h3 class="text-info">@ViewBag.TotalUsers</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Queued Messages</h5>
                <h3 class="text-success">@((ViewBag.QueuedOrders as List<CloudRetailWebApp.Models.OrderMessageModel>)?.Count ?? 0)</h3>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>Quick Actions</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li class="mb-2"><a asp-action="Orders" class="btn btn-outline-primary w-100">Manage Orders</a></li>
                    <li class="mb-2"><a asp-controller="Contracts" asp-action="Index" class="btn btn-outline-primary w-100">Manage Contracts</a></li>
                    <li class="mb-2"><a asp-controller="Products" asp-action="Index" class="btn btn-outline-primary w-100">Manage Products</a></li>
                    <li class="mb-2"><a asp-controller="Customers" asp-action="Index" class="btn btn-outline-primary w-100">Manage Customers</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>Queue Messages (@((ViewBag.QueuedOrders as List<CloudRetailWebApp.Models.OrderMessageModel>)?.Count ?? 0))</h5>
            </div>
            <div class="card-body">
                @if ((ViewBag.QueuedOrders as List<CloudRetailWebApp.Models.OrderMessageModel>)?.Any() == true)
                {
                    <ul class="list-group">
                        @foreach (var order in (List<CloudRetailWebApp.Models.OrderMessageModel>)ViewBag.QueuedOrders)
                        {
                            <li class="list-group-item">
                                <strong>Order ID:</strong> @order.OrderId<br />
                                <strong>User ID:</strong> @order.UserId<br />
                                <strong>Total:</strong> R @order.TotalAmount.ToString("N2")<br />
                                <small class="text-muted">@order.OrderDate.ToLocalTime().ToString("g")</small>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">No messages in queue.</p>
                }
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5>Contract Files (@((ViewBag.ContractFiles as List<string>)?.Count ?? 0))</h5>
            </div>
            <div class="card-body">
                @if ((ViewBag.ContractFiles as List<string>)?.Any() == true)
                {
                    <ul class="list-group">
                        @foreach (var file in (List<string>)ViewBag.ContractFiles)
                        {
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <span>@file</span>
                                <a asp-controller="Contracts" asp-action="Download" asp-route-fileName="@file" class="btn btn-sm btn-primary">Download</a>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">No contract files found.</p>
                }
            </div>
        </div>
    </div>
</div>